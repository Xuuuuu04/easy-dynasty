{
  "lastUpdated": "2026-01-20T18:27:24+08:00",
  "projectName": "EasyDynasty",
  "projectPath": "/Users/xushaoyang/Desktop/命理与塔罗/EasyDynasty",
  "summary": "AI 驱动的综合命理平台，整合塔罗牌、八字和紫微斗数",
  "modules": [
    {
      "name": "backend",
      "path": "/Users/xushaoyang/Desktop/命理与塔罗/EasyDynasty/backend",
      "type": "python-fastapi",
      "description": "Python FastAPI 后端服务，提供 API 接口、数据库交互和命理计算",
      "language": "Python",
      "version": "3.11",
      "framework": "FastAPI 0.109.0",
      "entryPoint": "main.py",
      "documentation": "backend/CLAUDE.md",
      "keyFiles": [
        "main.py",
        "init_db.py",
        "app/core/config.py",
        "app/db/session.py",
        "app/db/base.py",
        "requirements.txt"
      ],
      "dependencies": [
        "fastapi==0.109.0",
        "uvicorn==0.27.0",
        "sqlalchemy==2.0.25",
        "pymysql==1.1.0",
        "python-dotenv==1.0.1",
        "lunar-python==1.3.10",
        "iztro-py==0.3.3",
        "pydantic==2.6.0",
        "pydantic-settings==2.1.0"
      ],
      "apiEndpoints": [
        {
          "method": "GET",
          "path": "/",
          "description": "欢迎消息"
        },
        {
          "method": "GET",
          "path": "/health",
          "description": "健康检查"
        }
      ],
      "hasTests": false,
      "hasConfig": true,
      "hasDatabase": true,
      "databaseType": "MySQL",
      "coverage": {
        "scannedFiles": 9,
        "totalFiles": 15,
        "percentage": 60,
        "missingItems": [
          "API 路由模块 (app/api/)",
          "数据库模型 (app/models/)",
          "Pydantic Schemas (app/schemas/)",
          "CRUD 操作 (app/crud.py)"
        ]
      }
    },
    {
      "name": "web",
      "path": "/Users/xushaoyang/Desktop/命理与塔罗/EasyDynasty/web",
      "type": "nextjs-frontend",
      "description": "Next.js 16 + React 19 前端应用，提供塔罗占卜用户界面",
      "language": "TypeScript",
      "version": "5",
      "framework": "Next.js 16.0.10",
      "uiLibrary": "React 19.2.0",
      "styling": "Tailwind CSS v4",
      "entryPoint": "app/layout.tsx",
      "documentation": "web/CLAUDE.md",
      "keyFiles": [
        "app/layout.tsx",
        "app/page.tsx",
        "app/draw/page.tsx",
        "app/analysis/page.tsx",
        "app/api/chat/route.ts",
        "hooks/useTarotAnalysis.ts",
        "utils/prompts.ts",
        "types/tarot.ts",
        "package.json"
      ],
      "pages": [
        { "path": "/", "file": "app/page.tsx", "description": "首页（问题输入 + 牌阵选择）" },
        { "path": "/draw", "file": "app/draw/page.tsx", "description": "抽牌页面" },
        { "path": "/analysis", "file": "app/analysis/page.tsx", "description": "AI 解读页面" },
        { "path": "/history", "file": "app/history/page.tsx", "description": "历史记录列表" },
        { "path": "/history/[id]", "file": "app/history/[id]/page.tsx", "description": "历史记录详情" },
        { "path": "/settings", "file": "app/settings/page.tsx", "description": "API 设置页面" }
      ],
      "components": [
        "FanDeck.tsx",
        "FlipCard.tsx",
        "FlyingCard.tsx",
        "SpreadLayout.tsx",
        "TarotCard.tsx",
        "AnalysisDisplay.tsx",
        "TarotChat.tsx",
        "ModelSelector.tsx",
        "DrawnCardsDisplay.tsx",
        "Toast.tsx"
      ],
      "dependencies": [
        "next@16.0.10",
        "react@19.2.0",
        "react-dom@19.2.0",
        "react-markdown@^10.1.0",
        "tailwindcss@^4"
      ],
      "devDependencies": [
        "@tailwindcss/postcss@^4",
        "@types/node@^20",
        "@types/react@^19",
        "@types/react-dom@^19",
        "eslint@^9",
        "eslint-config-next@16.0.0",
        "typescript@^5"
      ],
      "apiRoutes": [
        {
          "method": "POST",
          "path": "/api/chat",
          "description": "默认 LLM 代理 API",
          "file": "app/api/chat/route.ts"
        }
      ],
      "hasTests": false,
      "hasConfig": true,
      "storage": {
        "sessionStorage": [
          "tarot_question",
          "tarot_spread",
          "tarot_drawn_cards"
        ],
        "localStorage": [
          "tarot_api_key",
          "tarot_api_base_url",
          "tarot_api_model",
          "tarot_reading_history"
        ]
      },
      "coverage": {
        "scannedFiles": 32,
        "totalFiles": 40,
        "percentage": 80,
        "missingItems": [
          "测试文件 (__tests__/)",
          "PWA 配置 (manifest.json, service-worker)",
          "国际化配置 (i18n)"
        ]
      }
    }
  ],
  "coverage": {
    "totalModules": 2,
    "scannedModules": 2,
    "totalFiles": 55,
    "scannedFiles": 41,
    "overallPercentage": 75,
    "ignoredPaths": [
      "node_modules/**",
      ".git/**",
      "venv/**",
      "__pycache__/**",
      "*.pyc",
      "*.lock",
      "*.log",
      "*.bin",
      "*.pdf",
      "*.png",
      "*.jpg",
      "*.jpeg",
      "*.gif",
      "*.mp4",
      "*.zip",
      "*.tar",
      "*.gz"
    ],
    "truncated": false
  },
  "gaps": [
    {
      "module": "backend",
      "severity": "high",
      "items": [
        "缺少 API 路由模块（app/api/）",
        "缺少数据库模型定义（app/models/）",
        "缺少 Pydantic Schemas（app/schemas/）",
        "缺少 CRUD 操作封装（app/crud.py）",
        "无测试文件"
      ]
    },
    {
      "module": "web",
      "severity": "medium",
      "items": [
        "无测试文件",
        "缺少 PWA 配置",
        "缺少国际化配置",
        "错误处理未统一"
      ]
    }
  ],
  "nextSteps": [
    "补充 backend 模块的 API 路由（塔罗牌、八字、紫微斗数）",
    "创建数据库模型和迁移脚本",
    "补充前后端测试文件（单元测试 + E2E 测试）",
    "统一错误处理和日志记录",
    "添加用户认证系统（JWT Token）",
    "优化前端性能（图片懒加载、代码分割）",
    "创建项目 README.md",
    "配置 Docker Compose（一键启动开发环境）"
  ],
  "recommendations": [
    "优先补扫 backend/app/api/ 目录（当前不存在，需创建）",
    "添加 API 文档（OpenAPI/Swagger）",
    "集成 CI/CD（GitHub Actions）",
    "添加代码覆盖率工具（pytest-cov、Jest Coverage）",
    "配置 ESLint + Prettier 统一代码风格",
    "添加 Git Hooks（Husky + lint-staged）",
    "创建部署文档（Docker、Kubernetes）"
  ]
}
