{
  "lastUpdated": "2026-01-20T23:18:52+08:00",
  "projectName": "EasyDynasty",
  "projectNameCn": "易朝",
  "projectPath": "/Users/xushaoyang/Desktop/命理与塔罗/EasyDynasty",
  "summary": "AI 驱动的综合命理平台，融合塔罗牌、八字和紫微斗数，支持会员分级、RAG 增强分析、流式 AI 解读",
  "version": "2.0.0",
  "modules": [
    {
      "name": "backend",
      "path": "/Users/xushaoyang/Desktop/命理与塔罗/EasyDynasty/backend",
      "type": "python-fastapi",
      "description": "Python FastAPI 后端服务，提供用户认证、八字分析、塔罗占卜、支付集成等 API",
      "language": "Python",
      "version": "3.11",
      "framework": "FastAPI 0.109.0",
      "entryPoint": "main.py",
      "documentation": "backend/CLAUDE.md",
      "database": "MySQL (SQLAlchemy 2.0 + PyMySQL)",
      "keyFeatures": [
        "JWT 用户认证",
        "会员分级系统 (Free/VIP/SVIP)",
        "八字排盘计算",
        "RAG 增强分析 (ChromaDB + LangChain)",
        "配额管理",
        "支付集成 (ZPay)"
      ],
      "dependencies": [
        "fastapi==0.109.0",
        "uvicorn==0.27.0",
        "sqlalchemy==2.0.25",
        "pymysql==1.1.0",
        "python-jose[cryptography]==3.3.0",
        "passlib[bcrypt]==1.7.4",
        "langchain==1.2.6",
        "chromadb==1.4.1",
        "lunar-python==1.3.10",
        "pydantic==2.6.0",
        "python-dotenv==1.0.1"
      ],
      "apiEndpoints": 20,
      "services": 6,
      "hasTests": false,
      "coverage": {
        "scannedFiles": 20,
        "totalFiles": 25,
        "percentage": 80
      }
    },
    {
      "name": "web",
      "path": "/Users/xushaoyang/Desktop/命理与塔罗/EasyDynasty/web",
      "type": "nextjs-frontend",
      "description": "Next.js 16 + React 19 前端应用，提供塔罗占卜、八字排盘、会员订阅等用户界面",
      "language": "TypeScript",
      "version": "5",
      "framework": "Next.js 16.0.10",
      "uiLibrary": "React 19.2.0",
      "styling": "Tailwind CSS v4",
      "entryPoint": "app/layout.tsx",
      "documentation": "web/CLAUDE.md",
      "keyFeatures": [
        "JWT 认证集成",
        "会员等级显示",
        "配额实时显示",
        "八字排盘可视化",
        "流式 AI 解读 (SSE)",
        "双 LLM 配置"
      ],
      "pages": 8,
      "components": 11,
      "dependencies": [
        "next@16.0.10",
        "react@19.2.0",
        "react-dom@19.2.0",
        "react-markdown@^10.1.0",
        "tailwindcss@^4"
      ],
      "hasTests": false,
      "coverage": {
        "scannedFiles": 30,
        "totalFiles": 35,
        "percentage": 85
      }
    }
  ],
  "techStack": {
    "backend": [
      "FastAPI 0.109.0",
      "SQLAlchemy 2.0",
      "PyMySQL 1.1.0",
      "Python-JOSE 3.3.0",
      "Passlib 1.7.4",
      "LangChain 1.2.6",
      "ChromaDB 1.4.1",
      "lunar-python 1.3.10",
      "Pydantic 2.6.0"
    ],
    "frontend": [
      "Next.js 16.0.10",
      "React 19.2.0",
      "TypeScript 5",
      "Tailwind CSS v4",
      "react-markdown 10.1.0"
    ],
    "database": [
      "MySQL 8.0+"
    ]
  },
  "keyFeatures": [
    "JWT 用户认证系统",
    "会员分级体系 (Free/VIP/SVIP)",
    "塔罗牌占卜 (78张牌 + 6种牌阵)",
    "八字排盘与 AI 分析",
    "RAG 增强分析 (ChromaDB + LangChain)",
    "流式 AI 解读 (SSE)",
    "支付集成 (ZPay 易支付)",
    "配额管理系统"
  ],
  "coverage": {
    "totalModules": 2,
    "scannedModules": 2,
    "totalFiles": 60,
    "scannedFiles": 50,
    "overallPercentage": 83,
    "ignoredPaths": [
      "node_modules/**",
      ".git/**",
      "venv/**",
      "__pycache__/**",
      "*.pyc",
      "*.lock",
      "*.log",
      "*.bin",
      "*.png",
      "*.jpg",
      "*.jpeg",
      "*.gif",
      "*.mp4",
      "*.zip",
      "*.tar",
      "*.gz"
    ]
  },
  "gaps": [
    {
      "module": "backend",
      "severity": "high",
      "items": [
        "测试覆盖不足 (0%)",
        "ORM 迁移未完成 (部分使用原始 SQL)",
        "API 文档不完善"
      ]
    },
    {
      "module": "web",
      "severity": "medium",
      "items": [
        "测试覆盖不足 (0%)",
        "前端性能优化空间",
        "错误处理未统一"
      ]
    },
    {
      "module": "infrastructure",
      "severity": "medium",
      "items": [
        "Docker 配置缺失",
        "CI/CD 配置缺失",
        "监控系统缺失"
      ]
    }
  ],
  "nextSteps": [
    "补充单元测试 (pytest + Jest)",
    "添加 E2E 测试 (Playwright)",
    "完善 Swagger/OpenAPI 文档",
    "创建 Docker Compose 配置",
    "添加 Sentry 错误追踪",
    "优化前端性能 (代码分割、懒加载)",
    "ORM 迁移 (SQLAlchemy Models)",
    "配置 CI/CD (GitHub Actions)"
  ],
  "recommendations": [
    "优先补充测试覆盖",
    "完善 API 文档",
    "Docker 化部署",
    "添加监控告警",
    "优化数据库查询",
    "实现 Redis 缓存层"
  ],
  "documentation": {
    "root": "CLAUDE.md",
    "backend": "backend/CLAUDE.md",
    "web": "web/CLAUDE.md",
    "readme": "README.md"
  }
}
